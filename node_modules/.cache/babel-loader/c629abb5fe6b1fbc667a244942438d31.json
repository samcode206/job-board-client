{"ast":null,"code":"var _jsxFileName = \"/Users/sameem/Desktop/job-board-client/src/components/Jobs/subcomponents/JobDetails.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport displaySalary from '../subcomponents/helpers/displaySalary';\nimport baseURL from '../../../Server';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function JobDetails(props) {\n  _s();\n\n  const {\n    jobId,\n    cancelDetails\n  } = props;\n  const [job, setJob] = useState({});\n  const [hasApplied, setHasApplied] = useState(false);\n  useEffect(() => {\n    if (jobId.length) {\n      baseURL.get(`/jobs/${jobId}`).then(res => {\n        const responseData = res.data;\n        setJob(responseData);\n      }).catch(err => {\n        console.error(err);\n      });\n\n      if (localStorage.getItem(\"userDetails\") !== null) {\n        const {\n          appliedJobs\n        } = JSON.parse(localStorage.getItem(\"userDetails\"));\n        const hasAppliedToThisJob = appliedJobs.filter(job => job.id === jobId);\n\n        if (hasAppliedToThisJob.length !== 0) {\n          setHasApplied(true);\n        } else {\n          setHasApplied(false);\n        }\n      }\n    }\n  }, [jobId, props.user, hasApplied]);\n\n  const applyToJob = async () => {\n    try {\n      const response = await baseURL.patch(`/app/${jobId}`, {\n        \"applicantId\": localStorage.getItem(\"userId\")\n      });\n\n      if (response.status === 200) {\n        const {\n          appliedJobs,\n          resume\n        } = JSON.parse(localStorage.getItem(\"userDetails\"));\n        appliedJobs.push({\n          title: jobTitle,\n          id: jobId\n        });\n        localStorage.setItem(\"userDetails\", JSON.stringify({\n          appliedJobs,\n          resume\n        }));\n        setHasApplied(true);\n      }\n    } catch (err) {\n      console.error(err);\n    }\n  };\n\n  const applyHandler = () => {\n    const message = `Looks Like your resume is empty or lacks enough information, to increase your success please provide more information in the account section. If you want to apply anyways press Ok, otherwise Cancel & go fill out your account details.`;\n    const {\n      resume\n    } = JSON.parse(localStorage.getItem(\"userDetails\")); // if resume has no skills no experience and no education then its considered empty otherwise\n\n    if (!resume.skills.length) {\n      if (window.confirm(message)) applyToJob();\n    } else {\n      applyToJob();\n    }\n  };\n\n  const withdrawHandler = async () => {\n    try {\n      // userId\n      const response = await baseURL.put(`/app/${jobId}`, {\n        \"userId\": localStorage.getItem(\"userId\")\n      });\n\n      if (response.status === 201) {\n        const {\n          appliedJobs,\n          resume\n        } = JSON.parse(localStorage.getItem(\"userDetails\"));\n        const newjobs = appliedJobs.filter(job => job.id !== jobId);\n        localStorage.setItem(\"userDetails\", JSON.stringify({\n          appliedJobs: newjobs,\n          resume\n        }));\n        setHasApplied(false);\n      }\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  const {\n    companyName,\n    createdAt,\n    jobDescription,\n    jobResponsibility,\n    jobTitle,\n    preferredSkills,\n    requiredSkills,\n    salaryRange,\n    applicants\n  } = job;\n  const date = new Date(createdAt && createdAt);\n\n  const cancelHandler = () => {\n    cancelDetails();\n    document.getElementById(\"search-field\").scrollIntoView();\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    id: \"start-of-job-detail\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container content mt-3 ml-3 mr-3\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: \"flex\",\n          justifyContent: \"space-between\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: jobTitle\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 14\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"icon is-small\",\n          children: /*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fas fa-times is-clickable\",\n            onClick: cancelHandler\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 14\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 14\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: companyName\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n        children: salaryRange && displaySalary(salaryRange)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n        children: \"Job Summary:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: jobDescription\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n        children: \"Responsiblitties:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: jobResponsibility && jobResponsibility.map(res => /*#__PURE__*/_jsxDEV(\"li\", {\n          children: res\n        }, res, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 63\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n        children: \"Required Skills:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: requiredSkills && requiredSkills.map(skill => /*#__PURE__*/_jsxDEV(\"li\", {\n          children: skill\n        }, skill, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 59\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n        children: \"Prefered Skills:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: preferredSkills && preferredSkills.map(skill => /*#__PURE__*/_jsxDEV(\"li\", {\n          children: skill\n        }, skill, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 66\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 13\n      }, this), hasApplied === true ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"field is-grouped is-grouped-centered\",\n        children: [props.user.length ? /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"button is-danger\",\n          onClick: withdrawHandler,\n          children: \"Withdraw Application\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 38\n        }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n          title: \"yoo\",\n          disabled: true,\n          className: \"button is-link\",\n          children: \"Quick Apply\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"button\",\n          style: {\n            marginLeft: \"10px\"\n          },\n          onClick: cancelHandler,\n          children: \"Close\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 39\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"field is-grouped is-grouped-centered\",\n        children: [props.user.length ? /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"button is-link\",\n          onClick: () => {\n            applyHandler();\n          },\n          children: \"Quick Apply\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 38\n        }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n          title: \"yoo\",\n          disabled: true,\n          className: \"button is-link\",\n          children: \"Quick Apply\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"button\",\n          style: {\n            marginLeft: \"10px\"\n          },\n          onClick: cancelHandler,\n          children: \"Close\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 17\n      }, this), !props.user.length && /*#__PURE__*/_jsxDEV(\"small\", {\n        className: \"has-text-danger\",\n        children: \"Please Login to Apply!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 35\n      }, this), /*#__PURE__*/_jsxDEV(\"footer\", {\n        id: \"ftr\",\n        style: {\n          display: \"flex\",\n          flexDirection: \"row\",\n          justifyContent: \"space-between\",\n          paddingTop: \"0.5%\",\n          marginBottom: \"0\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"small\", {\n          children: [applicants && applicants.length, \" \", /*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fas fa-user-plus\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 54\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n          children: [\"Listing Date: \", date.getFullYear() + '-' + (date.getMonth() + 1) + '-' + date.getDate()]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 89,\n    columnNumber: 12\n  }, this);\n}\n\n_s(JobDetails, \"ZFPAUR4DY+scHrgGrrCkvcyr4Wk=\");\n\n_c = JobDetails;\n;\n\nvar _c;\n\n$RefreshReg$(_c, \"JobDetails\");","map":{"version":3,"sources":["/Users/sameem/Desktop/job-board-client/src/components/Jobs/subcomponents/JobDetails.js"],"names":["React","useEffect","useState","displaySalary","baseURL","JobDetails","props","jobId","cancelDetails","job","setJob","hasApplied","setHasApplied","length","get","then","res","responseData","data","catch","err","console","error","localStorage","getItem","appliedJobs","JSON","parse","hasAppliedToThisJob","filter","id","user","applyToJob","response","patch","status","resume","push","title","jobTitle","setItem","stringify","applyHandler","message","skills","window","confirm","withdrawHandler","put","newjobs","log","companyName","createdAt","jobDescription","jobResponsibility","preferredSkills","requiredSkills","salaryRange","applicants","date","Date","cancelHandler","document","getElementById","scrollIntoView","display","justifyContent","map","skill","marginLeft","flexDirection","paddingTop","marginBottom","getFullYear","getMonth","getDate"],"mappings":"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","sourcesContent":["import React,{useEffect, useState} from 'react';\nimport displaySalary from '../subcomponents/helpers/displaySalary';\nimport baseURL from '../../../Server';\n\nexport default function JobDetails(props){\n    const {jobId, cancelDetails} = props; \n    const [job, setJob] = useState({});\n    const [hasApplied, setHasApplied] = useState(false); \n    \n    useEffect(()=>{\n       if (jobId.length){\n       baseURL.get(`/jobs/${jobId}`)\n       .then(res => {\n           const responseData = res.data; \n            setJob(responseData); \n       })\n       .catch(err=>{\n           console.error(err); \n       });\n\n       if (localStorage.getItem(\"userDetails\") !== null){\n        const {appliedJobs} = JSON.parse(localStorage.getItem(\"userDetails\"));\n        const hasAppliedToThisJob = appliedJobs.filter(job => job.id === jobId);\n        if (hasAppliedToThisJob.length !== 0){\n            setHasApplied(true); \n        } else {\n            setHasApplied(false); \n        }\n       }\n    }   \n    }, [jobId, props.user, hasApplied]);\n    \n    const applyToJob = async () =>{\n        try {\n           const response = await baseURL.patch(`/app/${jobId}`, {\n                \"applicantId\" : localStorage.getItem(\"userId\")\n            });\n            if (response.status === 200){\n                const {appliedJobs, resume} = JSON.parse(localStorage.getItem(\"userDetails\"));\n                appliedJobs.push({title: jobTitle, id: jobId}); \n                localStorage.setItem(\"userDetails\",JSON.stringify({appliedJobs, resume})); \n                setHasApplied(true);\n            }\n        } \n        catch(err){\n            console.error(err); \n        }\n    }; \n\n    const applyHandler = () => {\n        const message = `Looks Like your resume is empty or lacks enough information, to increase your success please provide more information in the account section. If you want to apply anyways press Ok, otherwise Cancel & go fill out your account details.`;\n\n        const {resume} = JSON.parse(localStorage.getItem(\"userDetails\"));\n        // if resume has no skills no experience and no education then its considered empty otherwise\n        if (!resume.skills.length){\n            if(window.confirm(message)) applyToJob(); \n        } else {\n            applyToJob(); \n        }\n    }; \n\n    const withdrawHandler = async () => {\n        try {\n            // userId\n            const response = await baseURL.put(`/app/${jobId}`, {\n                \"userId\": localStorage.getItem(\"userId\")\n            });\n            if (response.status === 201){\n                const {appliedJobs, resume} = JSON.parse(localStorage.getItem(\"userDetails\"));\n                const newjobs = appliedJobs.filter(job=> job.id !== jobId);\n                localStorage.setItem(\"userDetails\", JSON.stringify({appliedJobs: newjobs, resume}));\n                setHasApplied(false); \n            }\n        } \n        catch(err){\n            console.log(err); \n        }\n    }; \n\n    const { companyName,createdAt,jobDescription,jobResponsibility,\n            jobTitle,preferredSkills,requiredSkills,salaryRange,applicants} = job;\n    const date = new Date(createdAt && createdAt);\n    \n    const cancelHandler = () => {\n        cancelDetails();\n        document.getElementById(\"search-field\").scrollIntoView();\n    }; \n\n    return <div id=\"start-of-job-detail\">\n        <div className=\"container content mt-3 ml-3 mr-3\">\n\n        <div style={{display:\"flex\", justifyContent:\"space-between\"}}>\n             <h1>{jobTitle}</h1>\n             <span className=\"icon is-small\">\n             <i className=\"fas fa-times is-clickable\" onClick={cancelHandler}></i>\n             </span>\n            \n        </div>\n\n        <p>{companyName}</p>\n        <h4>{salaryRange && displaySalary(salaryRange)}</h4>\n        <h5>Job Summary:</h5>\n        <p>{jobDescription}</p>\n        <h5>Responsiblitties:</h5>\n        <ul>\n            {jobResponsibility && jobResponsibility.map(res=> <li key={res}>{res}</li>)}\n        </ul>\n        <h5>Required Skills:</h5>\n        <ul>\n            {requiredSkills && requiredSkills.map(skill=> <li key={skill}>{skill}</li>)}\n        </ul>\n        <h5>Prefered Skills:</h5>\n            <ul>\n                {preferredSkills && preferredSkills.map(skill => <li key={skill}>{skill}</li>)}\n            </ul>\n\n            {\n                hasApplied === true ? <div className=\"field is-grouped is-grouped-centered\"> \n                {props.user.length ? <button className=\"button is-danger\" onClick={withdrawHandler}>Withdraw Application</button> : \n                <button title=\"yoo\" disabled className=\"button is-link\">Quick Apply</button>}\n                <button className=\"button\" style={{marginLeft:\"10px\"}}onClick={cancelHandler}>Close</button>\n             </div> :\n                <div className=\"field is-grouped is-grouped-centered\"> \n                {props.user.length ? <button className=\"button is-link\" onClick={()=>{applyHandler()}}>Quick Apply</button> : \n                <button title=\"yoo\" disabled className=\"button is-link\">Quick Apply</button>}\n                <button className=\"button\" style={{marginLeft:\"10px\"}}onClick={cancelHandler}>Close</button>\n             </div>\n            }\n\n\n           {!props.user.length && <small className=\"has-text-danger\">Please Login to Apply!</small> }\n\n        <footer id=\"ftr\" style={{display:\"flex\", flexDirection:\"row\", justifyContent:\"space-between\", paddingTop:\"0.5%\", marginBottom:\"0\"}}>\n            <small>{applicants && applicants.length} <i className=\"fas fa-user-plus\"></i></small>\n            <small>Listing Date: {date.getFullYear()+'-' + (date.getMonth()+1) + '-'+date.getDate()}</small>\n        </footer>\n        <hr></hr>\n        </div>\n    </div>\n};\n"]},"metadata":{},"sourceType":"module"}