{"ast":null,"code":"var _jsxFileName = \"/Users/sameem/Desktop/job-board-client/src/components/Account/subcomponents/useractions/Account.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport baseURL from \"../../../../Server\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Account() {\n  _s();\n\n  // _ do not edit these are for the initail values \n  const [_email, _setEmail] = useState(\"\");\n  const [_firstName, _setFirstName] = useState(\"\");\n  const [_lastName, _setLastName] = useState(\"\"); // editable \n\n  const [email, setEmail] = useState(\"\");\n  const [firstName, setFirstName] = useState(\"\");\n  const [lastName, setLastName] = useState(\"\"); // password \n\n  const [passwordOld, setPasswordOld] = useState(\"\");\n  const [newPassword, setNewPassword] = useState(\"\"); // modes \n\n  const [editMode, setEditMode] = useState(false);\n  const [changePasswordMode, setChangePasswordMode] = useState(false); // errors || success \n\n  const [error, setError] = useState({\n    msg: \"\",\n    isError: false\n  });\n  const [success, setSuccess] = useState({\n    msg: \"\",\n    isSuccess: false\n  });\n  useEffect(() => {\n    (async () => {\n      const {\n        data: user\n      } = await baseURL.get(`/user/${localStorage.getItem(\"userId\")}`);\n\n      _setEmail(user.email);\n\n      _setFirstName(user.firstName);\n\n      _setLastName(user.lastName);\n    })();\n  }, []);\n\n  const setModeHandler = () => {\n    if (!editMode) {\n      setEditMode(!editMode);\n      setEmail(_email);\n      setFirstName(_firstName);\n      setLastName(_lastName);\n    } else {\n      setEditMode(!editMode);\n      setEmail(\"\");\n      setFirstName(\"\");\n      setLastName(\"\");\n    }\n  };\n\n  const setSuccessHandler = msg => {\n    setSuccess({\n      msg,\n      isSuccess: true\n    });\n    setTimeout(() => {\n      setSuccess({\n        msg: \"\",\n        isSuccess: false\n      });\n    }, 3000);\n  };\n\n  const setErrorHandler = msg => {\n    setError({\n      msg,\n      isError: true\n    });\n    setTimeout(() => {\n      setError({\n        msg: \"\",\n        isError: false\n      });\n    }, 5000);\n  };\n\n  const passwordChangeHandler = async () => {\n    //  user/password\n    try {\n      const response = await baseURL.patch(\"/user/password\", {\n        \"password\": passwordOld,\n        \"newPassword\": newPassword,\n        \"userId\": localStorage.getItem(\"userId\")\n      });\n\n      if (response.status === 200) {\n        setPasswordOld(\"\");\n        setNewPassword(\"\");\n        setSuccessHandler(\"password changed successfuly\");\n        setChangePasswordMode(!changePasswordMode);\n      }\n    } catch (err) {\n      if (err.response.data.error && typeof err.response.data.error === \"string\") {\n        setErrorHandler(err.response.data.error);\n      } else {\n        setErrorHandler(\"something went wrong please try again\");\n      }\n    }\n  };\n\n  const accountEditHandler = async () => {\n    const reqdata = () => {\n      if (email === _email) {\n        return {\n          \"firstName\": firstName,\n          \"lastName\": lastName,\n          \"userId\": localStorage.getItem(\"userId\")\n        };\n      } else {\n        return {\n          \"firstName\": firstName,\n          \"lastName\": lastName,\n          \"userId\": localStorage.getItem(\"userId\"),\n          \"email\": email\n        };\n      }\n    };\n\n    try {\n      const response = await baseURL.patch(\"/user\", reqdata());\n\n      if (response.status === 200) {\n        _setEmail(email);\n\n        _setFirstName(firstName);\n\n        _setLastName(lastName);\n\n        setFirstName(\"\");\n        setLastName(\"\");\n        setEmail(\"\");\n        setEditMode(!editMode);\n        setSuccessHandler(\"Account updates successfully proccessed\");\n      }\n    } catch (err) {\n      setErrorHandler(\"something went wrong please try again\");\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"field\",\n    children: [error.isError ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"notification is-danger is-light has-text-centered\",\n      children: [error.msg, \" \", /*#__PURE__*/_jsxDEV(\"i\", {\n        class: \"fas fa-exclamation-triangle\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 101\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 21\n    }, this) : null, success.isSuccess ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"notification is-success has-text-centered\",\n      children: [success.msg, \" \", /*#__PURE__*/_jsxDEV(\"i\", {\n        class: \"fas fa-clipboard-check\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 96\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 22\n    }, this) : null, /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"field is-grouped is-grouped-centered\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"control\",\n        children: /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"label\",\n          children: [\"First Name\", editMode === true ? /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"input\",\n            onChange: e => setFirstName(e.target.value),\n            value: firstName\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 44\n          }, this) : /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"input\",\n            disabled: true,\n            value: _firstName\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 145,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 16\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"field is-grouped is-grouped-centered\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"control\",\n        children: /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"label\",\n          children: [\"Last Name\", editMode === true ? /*#__PURE__*/_jsxDEV(\"input\", {\n            onChange: e => setLastName(e.target.value),\n            className: \"input\",\n            value: lastName\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 43\n          }, this) : /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"input\",\n            disabled: true,\n            value: _lastName\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 158,\n            columnNumber: 27\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 16\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"field is-grouped is-grouped-centered\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"control\",\n        children: /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"label\",\n          children: [\"User Email\", editMode === true ? /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"input\",\n            onChange: e => setEmail(e.target.value),\n            value: email\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 171,\n            columnNumber: 44\n          }, this) : /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"input\",\n            disabled: true,\n            value: _email\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 171,\n            columnNumber: 129\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 16\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 16\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"field is-grouped is-grouped-centered\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"control\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: editMode ? \"button\" : \"button is-info\",\n          onClick: () => {\n            setModeHandler();\n          },\n          children: editMode ? \"Cancel\" : \"Edit Account\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"control\",\n        children: changePasswordMode ? /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"button is-link is-light\",\n          disabled: true,\n          children: \"Change Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 47\n        }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"button is-link is-light\",\n          onClick: () => setChangePasswordMode(!changePasswordMode),\n          children: \"Change Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 16\n    }, this), changePasswordMode ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"field\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"field is-grouped is-grouped-centered\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"control\",\n          children: /*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"label\",\n            children: [\"Old Password\", /*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"input\",\n              placeholder: \"enter old password\",\n              value: passwordOld,\n              onChange: e => setPasswordOld(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 207,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 205,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 29\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 27\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"field is-grouped is-grouped-centered\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"control\",\n          children: /*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"label\",\n            children: [\"new Password\", /*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"input\",\n              placeholder: \"enter old password\",\n              value: newPassword,\n              onChange: e => setNewPassword(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 216,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 214,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 29\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 27\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"field is-grouped is-grouped-centered\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"control\",\n          children: [passwordOld.length && newPassword.length ? /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: passwordChangeHandler,\n            className: \"button is-link\",\n            children: \"Submit Password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 223,\n            columnNumber: 77\n          }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n            disabled: true,\n            className: \"button is-link\",\n            children: \"Submit Password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 224,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            style: {\n              marginLeft: \"10px\"\n            },\n            className: \"button\",\n            onClick: () => {\n              setNewPassword(\"\");\n              setPasswordOld(\"\");\n              setChangePasswordMode(!changePasswordMode);\n            },\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 227,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 29\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 27\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 21\n    }, this) : null, editMode ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"field is-grouped is-grouped-centered\",\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"control\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"button is-link\",\n          onClick: () => {\n            accountEditHandler();\n          },\n          children: \"Submit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 29\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 25\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 37\n    }, this) : null]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 125,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Account, \"8B7dcQD/1gjV4jrWfjz1DmtPe7Q=\");\n\n_c = Account;\n;\n\nvar _c;\n\n$RefreshReg$(_c, \"Account\");","map":{"version":3,"sources":["/Users/sameem/Desktop/job-board-client/src/components/Account/subcomponents/useractions/Account.js"],"names":["React","useEffect","useState","baseURL","Account","_email","_setEmail","_firstName","_setFirstName","_lastName","_setLastName","email","setEmail","firstName","setFirstName","lastName","setLastName","passwordOld","setPasswordOld","newPassword","setNewPassword","editMode","setEditMode","changePasswordMode","setChangePasswordMode","error","setError","msg","isError","success","setSuccess","isSuccess","data","user","get","localStorage","getItem","setModeHandler","setSuccessHandler","setTimeout","setErrorHandler","passwordChangeHandler","response","patch","status","err","accountEditHandler","reqdata","e","target","value","length","marginLeft"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from 'react';\nimport baseURL from \"../../../../Server\";\n\nexport default function Account(){\n    // _ do not edit these are for the initail values \n    const [_email, _setEmail] = useState(\"\");\n    const [_firstName, _setFirstName] = useState(\"\");\n    const [_lastName, _setLastName] = useState(\"\");\n\n    // editable \n    const [email, setEmail] = useState(\"\");\n    const [firstName, setFirstName] = useState(\"\");\n    const [lastName, setLastName] = useState(\"\");\n\n\n    // password \n    const [passwordOld, setPasswordOld] = useState(\"\");\n    const [newPassword, setNewPassword] = useState(\"\");\n\n    // modes \n    const [editMode, setEditMode] = useState(false);\n    const [changePasswordMode, setChangePasswordMode] = useState(false); \n\n    // errors || success \n    const [error, setError] = useState({msg: \"\", isError: false});\n    const [success, setSuccess] = useState({msg: \"\", isSuccess: false});\n\n    useEffect( ()=>{\n        (async ()=>{\n            const {data : user} = await baseURL.get(`/user/${localStorage.getItem(\"userId\")}`);\n            _setEmail(user.email);\n            _setFirstName(user.firstName);\n            _setLastName(user.lastName);\n         })()\n    }, []);\n\n    const setModeHandler = () =>{\n        if (!editMode){\n            setEditMode(!editMode);\n            setEmail(_email);\n            setFirstName(_firstName);\n            setLastName(_lastName);\n        } else {\n            setEditMode(!editMode);\n            setEmail(\"\");\n            setFirstName(\"\");\n            setLastName(\"\");\n        }\n    };\n\n    const setSuccessHandler = (msg) => {\n        setSuccess({msg, isSuccess: true});\n        setTimeout(()=> {\n            setSuccess({msg: \"\", isSuccess: false}); \n        }, 3000);\n    }; \n\n    const setErrorHandler = (msg) => {\n        setError({msg, isError: true});\n        setTimeout(()=>{\n            setError({msg: \"\", isError: false}); \n        }, 5000);\n    };\n\n    const passwordChangeHandler = async () => {\n        //  user/password\n        try {\n            const response = await baseURL.patch(\"/user/password\", {\n                \"password\" : passwordOld,\n                \"newPassword\" : newPassword,\n                \"userId\" : localStorage.getItem(\"userId\"),\n            });\n            if (response.status === 200){\n                setPasswordOld(\"\");\n                setNewPassword(\"\"); \n                setSuccessHandler(\"password changed successfuly\");\n                setChangePasswordMode(!changePasswordMode);\n            } \n\n        } catch(err){\n            if (err.response.data.error && typeof err.response.data.error === \"string\"){\n                setErrorHandler(err.response.data.error);\n            } else {\n                setErrorHandler(\"something went wrong please try again\")\n            }\n        }\n      \n        \n    }; \n\n    const accountEditHandler = async () => {\n        const reqdata = () =>{\n            if (email === _email){\n                return {\n                        \"firstName\" : firstName,\n                        \"lastName\" : lastName,\n                        \"userId\" : localStorage.getItem(\"userId\")\n                    }\n                \n            } else {\n                return {\n                    \"firstName\" : firstName,\n                    \"lastName\" : lastName,\n                    \"userId\" : localStorage.getItem(\"userId\"),\n                    \"email\" : email\n                }\n            }\n        }\n        try {\n            const response = await baseURL.patch(\"/user\", reqdata());\n            if (response.status === 200){\n                _setEmail(email);\n                _setFirstName(firstName);\n                _setLastName(lastName); \n                setFirstName(\"\"); setLastName(\"\"); setEmail(\"\"); \n                setEditMode(!editMode); \n                setSuccessHandler(\"Account updates successfully proccessed\");\n            }\n        } catch(err){\n                setErrorHandler(\"something went wrong please try again\");\n        }\n    }; \n\n    return (\n        <div className=\"field\">\n\n                {\n                    error.isError ?\n                    <div  className=\"notification is-danger is-light has-text-centered\">{error.msg} <i class=\"fas fa-exclamation-triangle\"></i></div> : null\n                }\n\n                {\n                    success.isSuccess ?\n                     <div  className=\"notification is-success has-text-centered\">{success.msg} <i class=\"fas fa-clipboard-check\"></i></div> \n                     : null \n                }\n\n                <div className=\"field is-grouped is-grouped-centered\">\n                <div className=\"control\">\n               <label className=\"label\">\n                   First Name\n                   {\n                       editMode === true ? <input className=\"input\" \n                       onChange={(e)=>setFirstName(e.target.value)} value={firstName}/>\n                     :  <input className=\"input\" disabled value={_firstName}/>\n                   }\n       \n               </label>\n               </div>\n               </div>\n\n                <div className=\"field is-grouped is-grouped-centered\">\n                <div className=\"control\">\n               <label className=\"label\">\n                  Last Name\n                  {\n                       editMode === true? <input onChange={(e)=>setLastName(e.target.value)} className=\"input\" value={lastName}/>\n                        : <input className=\"input\" disabled value={_lastName}/>\n                   }\n              \n               </label>\n               </div>\n               </div>\n\n\n               <div className=\"field is-grouped is-grouped-centered\">\n                <div className=\"control\">\n               <label className=\"label\">\n                  User Email\n                  {\n                       editMode === true ? <input className=\"input\" onChange={(e)=>setEmail(e.target.value)} value={email}/> :  <input className=\"input\" disabled value={_email}/>\n                  }\n\n               </label>\n               </div>\n               </div>\n\n\n\n               <div className=\"field is-grouped is-grouped-centered\">\n             \n                <p className=\"control\">\n                    <button className={editMode ? \"button\" : \"button is-info\"} onClick={()=> {setModeHandler()}}>\n                   {editMode ? \"Cancel\" : \"Edit Account\"}\n                    </button>\n                </p>\n\n                <p className=\"control\">\n                    {\n                        changePasswordMode ?  <button className=\"button is-link is-light\" disabled>Change Password</button> :\n                        <button className=\"button is-link is-light\" onClick={()=> setChangePasswordMode(!changePasswordMode)}>\n                        Change Password\n                        </button>\n                    }\n               \n                </p>\n\n               </div>\n\n                  {\n                    changePasswordMode ? \n                    <div className=\"field\">\n                          <div className=\"field is-grouped is-grouped-centered\">\n                            <div className=\"control\">\n                            <label className=\"label\">\n                                Old Password\n                                <input className=\"input\" placeholder=\"enter old password\" value={passwordOld} onChange={(e)=> setPasswordOld(e.target.value)}/>\n                            </label>\n                        </div>\n                          </div>\n\n                          <div className=\"field is-grouped is-grouped-centered\">\n                            <div className=\"control\">\n                            <label className=\"label\">\n                                new Password\n                                <input className=\"input\" placeholder=\"enter old password\" value={newPassword} onChange={(e)=> setNewPassword(e.target.value)}/>\n                            </label>\n                        </div>\n                          </div>\n                          <div className=\"field is-grouped is-grouped-centered\">\n                            <div className=\"control\">\n                            {\n                                passwordOld.length && newPassword.length ?  <button onClick={passwordChangeHandler} className=\"button is-link\">Submit Password</button> : \n                                <button disabled className=\"button is-link\">Submit Password</button>\n                            }\n                            {\n                                <button style={{marginLeft:\"10px\"}} className=\"button\"\n                                 onClick={()=> {setNewPassword(\"\"); setPasswordOld(\"\"); setChangePasswordMode(!changePasswordMode)}}>Cancel</button>\n                            }\n                        </div>\n                          </div>\n                       \n                    </div>\n                      : null\n                }\n                        {editMode ? <div className=\"field is-grouped is-grouped-centered\">\n             \n                        <p className=\"control\">\n                            <button className=\"button is-link\" onClick={()=> {accountEditHandler()}}>\n                                Submit \n                            </button>\n                        </p>\n\n                      \n                        </div>\n                    : null}\n        </div>\n    )\n}; "]},"metadata":{},"sourceType":"module"}